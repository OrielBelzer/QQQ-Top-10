<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QQQ Top 10 Investment Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .tab:hover {
            background: #e9ecef;
        }
        .tab.active {
            background: white;
            border-bottom: 3px solid #2a5298;
            color: #2a5298;
        }
        .content {
            padding: 30px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .investment-input {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .investment-input h3 {
            margin: 0 0 15px 0;
            font-size: 1.5rem;
        }
        .investment-input input[type="number"] {
            padding: 12px 20px;
            font-size: 1.2rem;
            border: none;
            border-radius: 25px;
            width: 200px;
            text-align: center;
            margin: 0 10px;
        }
        .radio-group {
            margin: 15px 0;
            font-size: 1rem;
        }
        .radio-group label {
            display: inline-block;
            margin: 0 15px;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.95rem;
        }
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #f1f3f4;
        }
        tr:hover {
            background: #f8f9ff;
        }
        .rank {
            font-weight: bold;
            color: #2a5298;
            text-align: center;
        }
        .company {
            font-weight: 600;
        }
        .symbol {
            font-family: 'Courier New', monospace;
            background: #f1f3f4;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        .currency {
            color: #28a745;
            font-weight: 600;
        }
        .percentage {
            color: #6f42c1;
            font-weight: 600;
        }
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .summary-card {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .summary-card h4 {
            margin: 0 0 10px 0;
            font-size: 1.1rem;
        }
        .summary-card .value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.95rem;
        }
        .update-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .total-verification {
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 8px;
            text-align: center;
        }
        .total-verification .amount {
            font-size: 1.3rem;
            font-weight: bold;
            color: #28a745;
        }
        .holdings-input {
            width: 120px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: right;
        }
        .recommendation-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .buy-action { background: linear-gradient(135deg, #56ab2f, #a8e6cf); }
        .sell-action { background: linear-gradient(135deg, #ff6b6b, #feca57); }
        .hold-action { background: linear-gradient(135deg, #667eea, #764ba2); }
        .allocation-controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>QQQ Top 10 Investment Calculator</h1>
            <p>Based on actual Invesco QQQ Trust (NASDAQ 100 ETF) weightings</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('calculator')">Investment Calculator</button>
            <button class="tab" onclick="showTab('portfolio')">My Portfolio</button>
            <button class="tab" onclick="showTab('data')">Market Data</button>
        </div>
        
        <div class="content">
            <div id="calculator" class="tab-content active">
                <div class="investment-input">
                    <h3>Investment Amount</h3>
                    <label>$</label>
                    <input type="number" id="investmentAmount" value="10000" min="1" step="1">
                    
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="calcMode" value="scaled" checked>
                            Use 100% of investment (scale weights)
                        </label>
                        <label>
                            <input type="radio" name="calcMode" value="actual">
                            Use actual QQQ weights (53.41% allocation)
                        </label>
                    </div>
                    
                    <button class="update-btn" onclick="calculateInvestment()">Update Allocations</button>
                </div>
                
                <div id="investmentResults"></div>
                
                <div class="summary-cards">
                    <div class="summary-card">
                        <h4>Total Investment</h4>
                        <div class="value" id="totalAmount">$10,000</div>
                    </div>
                    <div class="summary-card">
                        <h4>Number of Companies</h4>
                        <div class="value">10</div>
                    </div>
                    <div class="summary-card">
                        <h4>QQQ Top 10 Weight</h4>
                        <div class="value">53.41%</div>
                    </div>
                </div>
            </div>

            <div id="portfolio" class="tab-content">
                <div class="investment-input">
                    <h3>Portfolio Management</h3>
                    <p>Upload a screenshot or enter holdings manually</p>
                    
                    <input type="file" id="screenshotFile" accept="image/*" style="display: none;">
                    <button class="update-btn" onclick="document.getElementById('screenshotFile').click()">üì∏ Upload Screenshot</button>
                    <button class="update-btn" onclick="showPortfolioEntry()">‚úèÔ∏è Manual Entry</button>
                    
                    <div id="uploadStatus" style="margin-top: 15px; color: white; font-size: 0.9rem;"></div>
                </div>

                <div id="portfolioEntry" style="display: none;">
                    <h4>Enter Your Current Holdings</h4>
                    <p>Enter dollar amounts for stocks you own (leave others at 0):</p>
                    <div id="holdingsForm"></div>
                    <button class="update-btn" onclick="savePortfolio()">Save Portfolio</button>
                </div>

                <div id="portfolioAnalysis" style="display: none;">
                    <div class="allocation-controls">
                        <h4>Choose Your Allocation Strategy</h4>
                        <label style="display: block; margin: 10px 0;">
                            <input type="radio" name="portfolioMode" value="scaled" checked onchange="updatePortfolioView()">
                            <strong>Scale to 100%</strong> - Use all money for top 10 stocks
                        </label>
                        <label style="display: block; margin: 10px 0;">
                            <input type="radio" name="portfolioMode" value="actual" onchange="updatePortfolioView()">
                            <strong>Use QQQ weights</strong> - 53.41% in top 10, rest as cash
                        </label>
                    </div>

                    <div id="currentPortfolio"></div>
                    
                    <div class="investment-input">
                        <h3>Portfolio Actions</h3>
                        <div>
                            <label style="display: block; margin: 10px 0;">
                                <input type="radio" name="action" value="add" checked>
                                Add Investment: $<input type="number" id="addAmount" value="1000" style="width: 100px; margin-left: 10px;">
                            </label>
                            <label style="display: block; margin: 10px 0;">
                                <input type="radio" name="action" value="rebalance">
                                Rebalance Portfolio
                            </label>
                        </div>
                        <button class="update-btn" onclick="calculatePortfolioAction()">Get Recommendations</button>
                    </div>
                    
                    <div id="portfolioRecommendations"></div>
                </div>
            </div>
            
            <div id="data" class="tab-content">
                <h3>QQQ Holdings Overview</h3>
                <div id="marketData"></div>
            </div>
        </div>
    </div>

    <script>
        var companies = [
            {rank: 1, company: "NVIDIA Corporation", symbol: "NVDA", weight: 10.16},
            {rank: 2, company: "Microsoft Corporation", symbol: "MSFT", weight: 9.21},
            {rank: 3, company: "Apple Inc.", symbol: "AAPL", weight: 7.03},
            {rank: 4, company: "Broadcom Inc.", symbol: "AVGO", weight: 5.36},
            {rank: 5, company: "Amazon.com Inc.", symbol: "AMZN", weight: 5.20},
            {rank: 6, company: "Meta Platforms Inc.", symbol: "META", weight: 4.83},
            {rank: 7, company: "Netflix Inc.", symbol: "NFLX", weight: 3.23},
            {rank: 8, company: "Alphabet Inc. (Combined)", symbol: "GOOGL/GOOG", weight: 3.04},
            {rank: 9, company: "Tesla Inc.", symbol: "TSLA", weight: 2.97},
            {rank: 10, company: "Costco Wholesale Corp.", symbol: "COST", weight: 2.38}
        ];

        var portfolio = {};
        var totalWeight = 53.41;

        function showTab(tabName) {
            document.getElementById('calculator').classList.remove('active');
            document.getElementById('portfolio').classList.remove('active');
            document.getElementById('data').classList.remove('active');
            
            var tabs = document.querySelectorAll('.tab');
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'calculator') {
                tabs[0].classList.add('active');
                calculateInvestment();
            } else if (tabName === 'portfolio') {
                tabs[1].classList.add('active');
            } else {
                tabs[2].classList.add('active');
                showMarketData();
            }
        }

        function calculateInvestment() {
            var amount = parseFloat(document.getElementById('investmentAmount').value) || 0;
            var mode = document.querySelector('input[name="calcMode"]:checked').value;
            
            var scaling = mode === 'scaled' ? (100 / totalWeight) : 1;
            var targetTotal = mode === 'scaled' ? amount : Math.round(amount * totalWeight / 100);
            
            var allocations = [];
            var runningTotal = 0;
            
            for (var i = 0; i < companies.length; i++) {
                var weight = companies[i].weight * scaling;
                var allocation = Math.round((weight / 100) * amount);
                allocations.push({
                    company: companies[i],
                    weight: weight,
                    amount: allocation
                });
                runningTotal += allocation;
            }
            
            // Adjust for rounding
            var diff = targetTotal - runningTotal;
            if (diff !== 0) {
                allocations[0].amount += diff;
            }
            
            var html = '<table><thead><tr>';
            html += '<th>Rank</th><th>Company</th><th>Symbol</th><th>Weight</th><th>Amount</th>';
            html += '</tr></thead><tbody>';
            
            var finalTotal = 0;
            for (var i = 0; i < allocations.length; i++) {
                var item = allocations[i];
                finalTotal += item.amount;
                
                html += '<tr>';
                html += '<td class="rank">' + item.company.rank + '</td>';
                html += '<td class="company">' + item.company.company + '</td>';
                html += '<td><span class="symbol">' + item.company.symbol + '</span></td>';
                html += '<td class="percentage">' + item.weight.toFixed(2) + '%</td>';
                html += '<td class="currency">$' + item.amount.toLocaleString() + '</td>';
                html += '</tr>';
            }
            
            html += '</tbody></table>';
            html += '<div class="total-verification">';
            html += '<strong>Total: <span class="amount">$' + finalTotal.toLocaleString() + '</span></strong>';
            html += '</div>';
            
            document.getElementById('investmentResults').innerHTML = html;
            document.getElementById('totalAmount').textContent = '$' + amount.toLocaleString();
        }

        function showPortfolioEntry() {
            var html = '<table><thead><tr>';
            html += '<th>Company</th><th>Symbol</th><th>Current Holdings ($)</th>';
            html += '</tr></thead><tbody>';
            
            for (var i = 0; i < companies.length; i++) {
                html += '<tr>';
                html += '<td class="company">' + companies[i].company + '</td>';
                html += '<td><span class="symbol">' + companies[i].symbol + '</span></td>';
                html += '<td><input type="number" class="holdings-input" id="holding_' + i + '" value="0" min="0" step="0.01"></td>';
                html += '</tr>';
            }
            html += '</tbody></table>';
            
            document.getElementById('holdingsForm').innerHTML = html;
            document.getElementById('portfolioEntry').style.display = 'block';
        }

        function savePortfolio() {
            portfolio = {};
            var totalValue = 0;
            
            for (var i = 0; i < companies.length; i++) {
                var value = parseFloat(document.getElementById('holding_' + i).value) || 0;
                if (value > 0) {
                    portfolio[companies[i].symbol] = {
                        company: companies[i].company,
                        symbol: companies[i].symbol,
                        value: value,
                        targetWeight: companies[i].weight
                    };
                    totalValue += value;
                }
            }
            
            if (totalValue > 0) {
                document.getElementById('portfolioEntry').style.display = 'none';
                document.getElementById('portfolioAnalysis').style.display = 'block';
                updatePortfolioView();
            } else {
                alert('Please enter at least one holding.');
            }
        }

        function updatePortfolioView() {
            var mode = document.querySelector('input[name="portfolioMode"]:checked').value;
            var scaling = mode === 'scaled' ? (100 / totalWeight) : 1;
            
            var totalValue = 0;
            for (var symbol in portfolio) {
                totalValue += portfolio[symbol].value;
            }
            
            var html = '<h4>Current Holdings</h4><table><thead><tr>';
            html += '<th>Company</th><th>Symbol</th><th>Value</th><th>Current %</th><th>Target %</th><th>Difference</th>';
            html += '</tr></thead><tbody>';
            
            for (var i = 0; i < companies.length; i++) {
                var company = companies[i];
                var holding = portfolio[company.symbol];
                
                if (holding) {
                    var currentPct = (holding.value / totalValue) * 100;
                    var targetPct = company.weight * scaling;
                    var diff = currentPct - targetPct;
                    var color = Math.abs(diff) < 0.5 ? '#28a745' : (diff > 0 ? '#dc3545' : '#007bff');
                    
                    html += '<tr>';
                    html += '<td class="company">' + company.company + '</td>';
                    html += '<td><span class="symbol">' + company.symbol + '</span></td>';
                    html += '<td class="currency">$' + holding.value.toLocaleString() + '</td>';
                    html += '<td class="percentage">' + currentPct.toFixed(2) + '%</td>';
                    html += '<td class="percentage">' + targetPct.toFixed(2) + '%</td>';
                    html += '<td style="color: ' + color + '; font-weight: bold;">' + 
                           (diff >= 0 ? '+' : '') + diff.toFixed(2) + '%</td>';
                    html += '</tr>';
                }
            }
            html += '</tbody></table>';
            
            var modeText = mode === 'scaled' ? 'Using scaled weights (100% allocation)' : 'Using actual QQQ weights (53.41% allocation)';
            html += '<div class="total-verification">';
            html += '<strong>Total: <span class="amount">$' + totalValue.toLocaleString() + '</span></strong><br>';
            html += '<small>' + modeText + '</small>';
            html += '</div>';
            
            document.getElementById('currentPortfolio').innerHTML = html;
        }

        function calculatePortfolioAction() {
            var action = document.querySelector('input[name="action"]:checked').value;
            var mode = document.querySelector('input[name="portfolioMode"]:checked').value;
            var scaling = mode === 'scaled' ? (100 / totalWeight) : 1;
            
            var totalValue = 0;
            for (var symbol in portfolio) {
                totalValue += portfolio[symbol].value;
            }
            
            var html = '';
            
            if (action === 'add') {
                var addAmount = parseFloat(document.getElementById('addAmount').value) || 0;
                var newTotal = totalValue + addAmount;
                
                html = '<h4>Additional Investment Recommendations (+$' + addAmount.toLocaleString() + ')</h4>';
                
                for (var i = 0; i < companies.length; i++) {
                    var company = companies[i];
                    var targetWeight = company.weight * scaling;
                    var targetValue = (targetWeight / 100) * newTotal;
                    var currentValue = portfolio[company.symbol] ? portfolio[company.symbol].value : 0;
                    var buyAmount = targetValue - currentValue;
                    
                    if (buyAmount > 5) {
                        html += '<div class="recommendation-card buy-action">';
                        html += '<strong>BUY ' + company.symbol + '</strong><br>';
                        html += company.company + '<br>';
                        html += 'Amount: $' + Math.round(buyAmount).toLocaleString();
                        html += '</div>';
                    }
                }
            } else {
                html = '<h4>Rebalancing Recommendations</h4>';
                var hasActions = false;
                
                for (var i = 0; i < companies.length; i++) {
                    var company = companies[i];
                    var holding = portfolio[company.symbol];
                    
                    if (holding) {
                        var targetWeight = company.weight * scaling;
                        var targetValue = (targetWeight / 100) * totalValue;
                        var difference = targetValue - holding.value;
                        
                        if (Math.abs(difference) > totalValue * 0.01) {
                            hasActions = true;
                            var isBS = difference > 0;
                            html += '<div class="recommendation-card ' + (isBS ? 'buy-action' : 'sell-action') + '">';
                            html += '<strong>' + (isBS ? 'BUY' : 'SELL') + ' ' + company.symbol + '</strong><br>';
                            html += company.company + '<br>';
                            html += 'Amount: $' + Math.abs(Math.round(difference)).toLocaleString();
                            html += '</div>';
                        }
                    }
                }
                
                if (!hasActions) {
                    html += '<div class="recommendation-card hold-action">';
                    html += '<strong>Portfolio is balanced!</strong><br>No major changes needed.';
                    html += '</div>';
                }
            }
            
            document.getElementById('portfolioRecommendations').innerHTML = html;
        }

        function showMarketData() {
            var companies20 = companies.slice();
            companies20.push(
                {rank: 11, company: "Palantir Technologies Inc.", symbol: "PLTR", weight: 1.89},
                {rank: 12, company: "Advanced Micro Devices Inc.", symbol: "AMD", weight: 1.74},
                {rank: 13, company: "T-Mobile US Inc.", symbol: "TMUS", weight: 1.61},
                {rank: 14, company: "Cisco Systems Inc.", symbol: "CSCO", weight: 1.49},
                {rank: 15, company: "Linde PLC", symbol: "LIN", weight: 1.43},
                {rank: 16, company: "Intuit Inc.", symbol: "INTU", weight: 1.41},
                {rank: 17, company: "PepsiCo Inc.", symbol: "PEP", weight: 1.38},
                {rank: 18, company: "Booking Holdings Inc.", symbol: "BKNG", weight: 1.35},
                {rank: 19, company: "Intuitive Surgical Inc.", symbol: "ISRG", weight: 1.32},
                {rank: 20, company: "Texas Instruments Inc.", symbol: "TXN", weight: 1.28}
            );
            
            var html = '<h4>QQQ Top 20 Holdings</h4><table><thead><tr>';
            html += '<th>Rank</th><th>Company</th><th>Symbol</th><th>Weight</th><th>Calculator</th>';
            html += '</tr></thead><tbody>';
            
            for (var i = 0; i < companies20.length; i++) {
                var company = companies20[i];
                var inCalc = i < 10 ? '‚úÖ Included' : '‚ùå Not included';
                
                html += '<tr>';
                html += '<td class="rank">' + company.rank + '</td>';
                html += '<td class="company">' + company.company + '</td>';
                html += '<td><span class="symbol">' + company.symbol + '</span></td>';
                html += '<td class="percentage">' + company.weight.toFixed(2) + '%</td>';
                html += '<td>' + inCalc + '</td>';
                html += '</tr>';
            }
            html += '</tbody></table>';
            
            document.getElementById('marketData').innerHTML = html;
        }

        function handleScreenshotUpload() {
            var file = document.getElementById('screenshotFile').files[0];
            if (!file) return;
            
            document.getElementById('uploadStatus').innerHTML = 'üì§ Processing screenshot...';
            
            var reader = new FileReader();
            reader.onload = function(e) {
                showScreenshotWithEntry(e.target.result);
                document.getElementById('uploadStatus').innerHTML = 'üìã Screenshot loaded! Enter values from your image:';
            };
            reader.readAsDataURL(file);
        }

        function showScreenshotWithEntry(imageSrc) {
            var html = '<div style="display: flex; gap: 20px; margin: 20px 0;">';
            
            // Left side - screenshot
            html += '<div style="flex: 1;">';
            html += '<h4>Your Portfolio Screenshot</h4>';
            html += '<img src="' + imageSrc + '" style="max-width: 100%; max-height: 400px; border: 1px solid #ddd; border-radius: 8px;">';
            html += '</div>';
            
            // Right side - entry form
            html += '<div style="flex: 1;">';
            html += '<h4>Enter Values from Screenshot</h4>';
            html += '<table><thead><tr><th>Company</th><th>Symbol</th><th>Amount ($)</th></tr></thead><tbody>';
            
            // Pre-fill with sample data based on common Robinhood patterns
            var sampleData = {
                'NVDA': '3750', 'MSFT': '3420', 'AAPL': '2650', 'AMZN': '1950', 'META': '1760',
                'AVGO': '2090', 'GOOGL/GOOG': '1190', 'NFLX': '1190', 'TSLA': '1150', 'COST': '860'
            };
            
            for (var i = 0; i < companies.length; i++) {
                var sample = sampleData[companies[i].symbol] || '';
                html += '<tr>';
                html += '<td class="company">' + companies[i].company + '</td>';
                html += '<td><span class="symbol">' + companies[i].symbol + '</span></td>';
                html += '<td><input type="number" class="holdings-input" id="holding_' + i + '" value="' + sample + '" min="0" step="0.01"></td>';
                html += '</tr>';
            }
            html += '</tbody></table>';
            html += '<button class="update-btn" onclick="savePortfolio()" style="margin-top: 15px;">Save Portfolio</button>';
            html += '<p style="font-size: 0.8rem; color: #666; margin-top: 10px;">üí° Values are pre-filled with sample data - adjust to match your screenshot</p>';
            html += '</div></div>';
            
            document.getElementById('holdingsForm').innerHTML = html;
            document.getElementById('portfolioEntry').style.display = 'block';
        }

        // Initialize file upload handler
        window.onload = function() {
            calculateInvestment();
            
            document.getElementById('screenshotFile').onchange = handleScreenshotUpload;
        };
    </script>
</body>
</html>